{
    "id": "61b2b3d4-f4c6-4c44-8383-ff0350e2b866",
    "connectorTypeString": "LOCAL_IDENTITY_DIRECTORY_CC",
    "accessMode": "WRITE",
    "destinationName": "",
    "relatedSystems": [
        "S4A"
    ],
    "gitAllowedExpressions": [],
    "gitDisallowedExpressions": [],
    "emailSubscribers": [],
    "name": "S4A import target",
    "tenantId": "teched2025-00",
    "state": "ENABLED",
    "systemManagementType": "CUSTOMER_MANAGED",
    "properties": {
        "ips.trace.failed.entity.content": "false"
    },
    "encryptedProperties": {},
    "automaticOutboundCertificateRenew": false,
    "transformationChanged": false,
    "readTransformationChanged": false,
    "writeTransformationChanged": false,
    "fromImport": false,
    "transformation": {
        "user": {
            "condition": "($.emails EMPTY false) && ($.userName EMPTY false) && isValidEmail($.emails[0].value)",
            "mappings": [
                {
                    "sourceVariable": "entityIdTargetSystem",
                    "targetPath": "$.id"
                },
                {
                    "constant": [
                        "urn:ietf:params:scim:schemas:core:2.0:User",
                        "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User",
                        "urn:ietf:params:scim:schemas:extension:sap:2.0:User",
                        "urn:sap:cloud:scim:schemas:extension:custom:2.0:User"
                    ],
                    "targetPath": "$.schemas"
                },
                {
                    "sourcePath": "$.userName",
                    "targetPath": "$.userName"
                },
                {
                    "sourcePath": "$.emails",
                    "preserveArrayWithSingleElement": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['emails']",
                    "scope": "createEntity",
                    "functions": [
                        {
                            "function": "putIfAbsent",
                            "key": "verified",
                            "defaultValue": true
                        }
                    ]
                },
                {
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['emails'][*]['type']",
                    "type": "remove"
                },
                {
                    "sourcePath": "$.emails[*].value",
                    "preserveArrayWithSingleElement": true,
                    "targetPath": "$.emails[?(@.value)]"
                },
                {
                    "sourcePath": "$.name.givenName",
                    "optional": true,
                    "targetPath": "$.name.givenName"
                },
                {
                    "sourcePath": "$.name.middleName",
                    "optional": true,
                    "targetPath": "$.name.middleName"
                },
                {
                    "sourcePath": "$.name.familyName",
                    "optional": true,
                    "targetPath": "$.name.familyName"
                },
                {
                    "sourcePath": "$.name.honorificPrefix",
                    "optional": true,
                    "targetPath": "$.name.honorificPrefix"
                },
                {
                    "sourcePath": "$.addresses",
                    "preserveArrayWithSingleElement": true,
                    "optional": true,
                    "targetPath": "$.addresses",
                    "functions": [
                        {
                            "function": "putIfAbsent",
                            "key": "type",
                            "defaultValue": "work"
                        },
                        {
                            "condition": "(@.type NIN ['work', 'home'])",
                            "function": "putIfPresent",
                            "key": "type",
                            "defaultValue": "work"
                        }
                    ],
                    "defaultValue": []
                },
                {
                    "sourcePath": "$.phoneNumbers",
                    "preserveArrayWithSingleElement": true,
                    "optional": true,
                    "targetPath": "$.phoneNumbers"
                },
                {
                    "sourcePath": "$.displayName",
                    "optional": true,
                    "targetPath": "$.displayName"
                },
                {
                    "sourcePath": "$.userType",
                    "optional": true,
                    "targetPath": "$.userType",
                    "defaultValue": "employee"
                },
                {
                    "sourcePath": "$.locale",
                    "optional": true,
                    "targetPath": "$.locale"
                },
                {
                    "sourcePath": "$.timezone",
                    "optional": true,
                    "targetPath": "$.timezone"
                },
                {
                    "sourcePath": "$.active",
                    "optional": true,
                    "targetPath": "$.active",
                    "defaultValue": true
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['validFrom']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['validFrom']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['validTo']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['validTo']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['employeeNumber']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['employeeNumber']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['costCenter']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['costCenter']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['organization']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['organization']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['division']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['division']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['department']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['department']"
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['manager']['value']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['manager']['value']",
                    "functions": [
                        {
                            "function": "resolveEntityIds"
                        }
                    ]
                },
                {
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['manager']['displayName']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:enterprise:2.0:User']['manager']['displayName']"
                },
                {
                    "constant": false,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['sendMail']",
                    "scope": "createEntity"
                },
                {
                    "constant": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['mailVerified']",
                    "scope": "createEntity"
                },
                {
                    "constant": "disabled",
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['passwordDetails']['status']",
                    "scope": "createEntity"
                },
                {
                    "sourcePath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:User']['attributes']",
                    "preserveArrayWithSingleElement": true,
                    "optional": true,
                    "targetPath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:User']['attributes']"
                },
                {
                    "ignore": true,
                    "constant": "<your-initial-password>",
                    "targetPath": "$.password",
                    "scope": "createEntity"
                },
                {
                    "ignore": true,
                    "constant": "<your-source-system-type-code>",
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['sourceSystem']",
                    "scope": "createEntity"
                },
                {
                    "ignore": true,
                    "constant": "<your-source-system-id>",
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:User']['sourceSystemId']",
                    "scope": "createEntity"
                }
            ]
        },
        "group": {
            "mappings": [
                {
                    "sourceVariable": "entityIdTargetSystem",
                    "targetPath": "$.id"
                },
                {
                    "constant": [
                        "urn:ietf:params:scim:schemas:core:2.0:Group",
                        "urn:sap:cloud:scim:schemas:extension:custom:2.0:Group",
                        "urn:ietf:params:scim:schemas:extension:sap:2.0:Group"
                    ],
                    "targetPath": "$.schemas"
                },
                {
                    "sourcePath": "$.displayName",
                    "targetPath": "$.displayName"
                },
                {
                    "sourcePath": "$.members[*].value",
                    "preserveArrayWithSingleElement": true,
                    "optional": true,
                    "targetPath": "$.members[?(@.value)]",
                    "functions": [
                        {
                            "entityType": "user",
                            "type": "resolveEntityIds"
                        }
                    ]
                },
                {
                    "sourcePath": "$.members[*].value",
                    "preserveArrayWithSingleElement": true,
                    "optional": true,
                    "targetPath": "$.members[?(@.value)]",
                    "functions": [
                        {
                            "entityType": "group",
                            "type": "resolveEntityIds"
                        }
                    ]
                },
                {
                    "sourcePath": "$.displayName",
                    "targetPath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:Group']['name']",
                    "scope": "createEntity"
                },
                {
                    "sourcePath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:Group']['name']",
                    "optional": true,
                    "targetPath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:Group']['name']",
                    "scope": "createEntity"
                },
                {
                    "sourcePath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:Group']['description']",
                    "optional": true,
                    "targetPath": "$['urn:sap:cloud:scim:schemas:extension:custom:2.0:Group']['description']"
                },
                {
                    "condition": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['applicationId'] EMPTY false",
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['applicationId']",
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['applicationId']"
                },
                {
                    "condition": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['applicationId'] EMPTY false",
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['type']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['type']"
                },
                {
                    "condition": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['applicationId'] EMPTY false",
                    "sourcePath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['supportedOperations']",
                    "optional": true,
                    "targetPath": "$['urn:ietf:params:scim:schemas:extension:sap:2.0:Group']['supportedOperations']"
                }
            ]
        }
    },
    "gitFetchAllowed": false
}